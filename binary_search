/******************************************************************************
/*Program to implement binary search */
/********************************************************************************/
#include <iostream>
using namespace std;
#define MAX_CAPACITY 10
#define KEY_NOT_FOUND -1

class Array{
    private :int arr[MAX_CAPACITY];
             int size;
             int bin_search(int);
             int bin_search_rec(int low, int high,int key);
    public  : Array():size(0)
              {
              }
              
              void input();
              void display();
              void search();
};

   void Array::input()
   {
       cout<<"Enter the size of elements : ";
       cin >> size;
       
       if(size < 1 || size > MAX_CAPACITY)
       {
        cout<<"Please enter correct size in the range  \"1 <= size <= "<<MAX_CAPACITY<<endl;   
        exit(0);
       }
       
       cout<<"Enter the "<<size<<" elements"<<endl;
       for(int i=0;i<size;i++)
       {
          cin>>arr[i];
       }
       cout<<endl;
   }
   
   void Array::display(){
       cout<<"Elements of the array :";
       for(int i=0; i<size;i++)
       {
         cout<<" "<<arr[i];
       }
       cout<<endl;
   }
   
   int Array::bin_search(int key)
   {
       int low = 0;
       int high = size-1;
       bool found;
       int mid;
       int index = -1;
       
       while(low<=high)
       {
           mid = int(low+high)/2;
           if(arr[mid] == key)
           {
               found = true;
               index = mid;
               break;
           }
           else if(arr[mid] > key)
           {
               high = mid-1;
           }
           else if(arr[mid] < key)
           {
               low = mid+1;
           }
       }
       
       if(found)
         //cout<<key<<" found at position : "<<index+1<<endl;
         return index+1;
       else
         //cout<<"Element "<<key<<" not found"<<endl;
         return KEY_NOT_FOUND;
   }
   
   
   int Array::bin_search_rec(int low, int high,int key)
   {
       if(low <= high)
       {
         int mid=(int)(low+high)/2;
         if(arr[mid]==key)
           {
               //cout<<"Found key at index "<<mid+1;
               return mid+1;
           }
        else if(arr[mid]>key)
             {
                 bin_search_rec(low,mid-1,key);
             }
        else if(arr[mid]<key)
            {
                bin_search_rec(mid+1,high,key);
            }
       }
       else
           return KEY_NOT_FOUND;
           //cout<<"Element "<<key<<" not found"<<endl;
   }
   
   void Array::search()
   {
       int key;
       cout<<"Enter the key element to be searched"<<endl;
       cin>>key;
       // this -> bin_search(key);
       int index = this -> bin_search_rec(0,size-1,key);
      
       if(index == KEY_NOT_FOUND)
                cout<<"Element "<<key<<" not found"<<endl;
       else
            cout<<"Found element at "<<key<<" at index "<<index;
   }

int main()
{
    Array arr;
    arr.input();
    arr.display();
    arr.search();
   
    return 0; 
}
